@page "/projects"

<PageTitle>Projects</PageTitle>


<MudText Typo="Typo.h6">Projects</MudText>

<MudIconButton Icon="@Icons.Material.Filled.Add" Color="Color.Primary">
    <MudLink Href="/projects/add"></MudLink>
</MudIconButton>
<br/>

<MudTable Items="_projects" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@_loading" LoadingProgressColor="Color.Info">
    <ColGroup>
        <col/>
        <col/>
        <col style="width: 150px"/>
    </ColGroup>
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Description</MudTh>
        <MudTh></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">
            <MudLink Href="@($"/projects/{context.Id}/tickets")">
                @context.Name
            </MudLink>
        </MudTd>
        <MudTd DataLabel="Description">@context.Description</MudTd>
        <MudTd DataLabel="" Style="text-align:right">
            <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Primary" Size="Size.Small">
                <MudLink Href="@($"/projects/{context.Id}")"></MudLink>
            </MudIconButton>
            <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Primary" Size="Size.Small"
                           OnClick="async () => await DeleteProject(context)">
            </MudIconButton>
        </MudTd>
    </RowTemplate>
</MudTable>